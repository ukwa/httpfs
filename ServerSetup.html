<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jul 25, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HttpFS - Hadoop HDFS over HTTP 0.20.2-cdh3u4 - Server Setup</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20120725" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                  <span id="bannerLeft">
                Apache Hadoop HttpFS for cdh3
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                      <div class="xleft">
        Last Published: 2012-07-25
                      </div>
            <div class="xright">            <a href="http://hadoop.apache.org/" class="externalLink">Apache Hadoop</a>
              
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                  </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed under the Apache License, Version 2.0 (the "License"); --><!-- you may not use this file except in compliance with the License. --><!-- You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><div class="section"><h2>Hadoop HDFS over HTTP 0.20.2-cdh3u4 - Server Setup<a name="Hadoop_HDFS_over_HTTP_0.20.2-cdh3u4_-_Server_Setup"></a></h2><p>[ <a href="./index.html">Go Back</a> ]</p><p>This page explains how to quickly setup HttpFS with Pseudo authentication against a Hadoop cluster with Pseudo authentication.</p><div class="section"><h3>Requirements<a name="Requirements"></a></h3><ul><li>Java 6+</li><li>Maven 3+</li></ul></div><div class="section"><h3>Install HttpFS<a name="Install_HttpFS"></a></h3><div class="source"><pre>~ $ tar xzf  httpfs-0.20.2-cdh3u4.tar.gz</pre></div></div><div class="section"><h3>Configure HttpFS<a name="Configure_HttpFS"></a></h3><p>By default, HttpFS assumes that Hadoop configuration files (<tt>core-site.xml &amp; hdfs-site.xml</tt>) are in the HttpFS configuration directory.</p><p>If this is not the case, add to the <tt>httpfs-site.xml</tt> file the <tt>httpfs.hadoop.config.dir</tt> property set to the location of the Hadoop configuration directory.</p></div><div class="section"><h3>Configure Hadoop<a name="Configure_Hadoop"></a></h3><p>Edit Hadoop <tt>core-site.xml</tt> and defined the Unix user that will run the HttpFS server as a proxyuser. For example:</p><div class="source"><pre>  ...
  &lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.#HTTPFSUSER#.hosts&lt;/name&gt;
    &lt;value&gt;httpfs-host.foo.com&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.#HTTPFSUSER#.groups&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
  &lt;/property&gt;
  ...</pre></div><p>IMPORTANT: Replace <tt>#HTTPFSUSER#</tt> with the Unix user that will start the HttpFS server.</p></div><div class="section"><h3>Restart Hadoop<a name="Restart_Hadoop"></a></h3><p>You need to restart Hadoop for the proxyuser configuration ot become active.</p></div><div class="section"><h3>Start/Stop HttpFS<a name="StartStop_HttpFS"></a></h3><p>To start/stop HttpFS use HttpFS's bin/httpfs.sh script. For example:</p><div class="source"><pre>httpfs-0.20.2-cdh3u4 $ bin/httpfs.sh start</pre></div><p>NOTE: Invoking the script without any parameters list all possible parameters (start, stop, run, etc.). The <tt>httpfs.sh</tt> script is a wrapper for Tomcat's <tt>catalina.sh</tt> script that sets the environment variables and Java System properties required to run HttpFS server.</p></div><div class="section"><h3>Test HttpFS is working<a name="Test_HttpFS_is_working"></a></h3><div class="source"><pre>~ $ curl -i &quot;http://&lt;HTTPFSHOSTNAME&gt;:14000?user.name=babu&amp;op=homedir&quot;
HTTP/1.1 200 OK
Content-Type: application/json
Transfer-Encoding: chunked

{&quot;homeDir&quot;:&quot;http:\/\/&lt;HTTPFS_HOST&gt;:14000\/user\/babu&quot;}</pre></div></div><div class="section"><h3>Embedded Tomcat Configuration<a name="Embedded_Tomcat_Configuration"></a></h3><p>To configure the embedded Tomcat go to the <tt>tomcat/conf</tt>.</p><p>HttpFS preconfigures the HTTP and Admin ports in Tomcat's <tt>server.xml</tt> to 14000 and 14001.</p><p>Tomcat logs are also preconfigured to go to HttpFS's <tt>logs/</tt> directory.</p><p>The following environment variables (which can be set in HttpFS's <tt>conf/httpfs-env.sh</tt> script) can be used to alter those values:</p><ul><li>HTTPFS_HTTP_PORT</li><li>HTTPFS_ADMIN_PORT</li><li>HTTPFS_LOG</li></ul></div><div class="section"><h3>HttpFS Configuration<a name="HttpFS_Configuration"></a></h3><p>HttpFS supports the following <a href="./httpfs-default.html">configuration properties</a> in the HttpFS's <tt>conf/httpfs-site.xml</tt> configuration file.</p><p>[ <a href="./index.html">Go Back</a> ]</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;            2012
              Cloudera
            
             - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
